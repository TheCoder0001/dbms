Consider following Relation
Employee(emp_id,employee_name,street,city)
Works(employee_name,company_name,salary)
Company(company_name,city)
Manages(employee_name,manager_name)
Create above tables with appropriate constraints like primary
key, foreign key, not null etc.
1. Change the city of employee working with InfoSys to
„Bangalore‟
2. Find the names of all employees who earn more than the average
salary of all employees of their company. Assume that all
people work for at most one company.
3. Find the names, street address, and cities of residence for
all employees who work for 'TechM' and earn more than $10,000.
4. Change name of table Manages to Management.
5. Create Simple and Unique index on employee table.
6. Display index Information

CREATE TABLE Employee(
  emp_id INT PRIMARY KEY,
  employee_name VARCHAR(30) UNIQUE,
  street VARCHAR(30),
  city VARCHAR(30)
);

CREATE TABLE Company(
  company_name VARCHAR(30) PRIMARY KEY,
  city VARCHAR(30)
);

CREATE TABLE Works(
  employee_name VARCHAR(30),
  company_name VARCHAR(30),
  salary INT,
  FOREIGN KEY(employee_name) REFERENCES Employee(employee_name),
  FOREIGN KEY(company_name) REFERENCES Company(company_name)
);

CREATE TABLE Manages(
  employee_name VARCHAR(30),
  manager_name VARCHAR(30),
  FOREIGN KEY(employee_name) REFERENCES Employee(employee_name)
);

INSERT INTO Employee VALUES
(1,'Rahul','MG Road','Pune'),
(2,'Neha','Camp','Pune'),
(3,'Amit','Kothrud','Pune');

INSERT INTO Company VALUES
('TCS','Pune'),
('TechM','Mumbai'),
('Infosys','Bangalore');

INSERT INTO Works VALUES
('Rahul','TCS',12000),
('Neha','TechM',15000),
('Amit','Infosys',9000);

INSERT INTO Manages VALUES
('Rahul','Neha');


UPDATE Employee
SET city='Bangalore'
WHERE employee_name IN (SELECT employee_name FROM Works WHERE company_name='Infosys');


SELECT W1.employee_name
FROM Works W1
WHERE W1.salary > (
    SELECT AVG(W2.salary)
    FROM Works W2
    WHERE W1.company_name = W2.company_name
);


SELECT E.employee_name, E.street, E.city
FROM Employee E
JOIN Works W ON E.employee_name=W.employee_name
WHERE W.company_name='TechM' AND W.salary>10000;


RENAME TABLE Manages TO Management;


CREATE INDEX idx_city ON Employee(city);
CREATE UNIQUE INDEX idx_empname ON Employee(employee_name);


SHOW INDEX FROM Employee;
